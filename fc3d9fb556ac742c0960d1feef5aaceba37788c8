{
  "comments": [
    {
      "key": {
        "uuid": "f0684b04_afe06530",
        "filename": "perflib/src/main/java/com/android/tools/perflib/heap/analysis/Dominators.java",
        "patchSetId": 2
      },
      "lineNbr": 73,
      "author": {
        "id": 1047453
      },
      "writtenOn": "2014-09-08T18:47:34Z",
      "side": 1,
      "message": "I am not sure about the local Id. In its documentation it says \"another id\" but it\u0027s unclear what it is local to. After looking some more I realized that it is just the index into this mDominatorMap private array. I might be completely wrong, but couldn\u0027t we just have the dominator of an instance in the instance itself? So this line would become something like:\n\nref.setDominator(Snapshot.SENTINEL_ROOT);\n\nIt was a map from instance to instance, so if we have the original instance it would just work. and we don\u0027t need to keep a separate array for it nor the new id. After all the dominator is something that does belong in the model itself.",
      "range": {
        "startLine": 73,
        "startChar": 34,
        "endLine": 73,
        "endChar": 44
      },
      "revId": "fc3d9fb556ac742c0960d1feef5aaceba37788c8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10f15fa2_94cc8c70",
        "filename": "perflib/src/main/java/com/android/tools/perflib/heap/analysis/Dominators.java",
        "patchSetId": 2
      },
      "lineNbr": 73,
      "author": {
        "id": 1048338
      },
      "writtenOn": "2014-09-09T17:47:40Z",
      "side": 1,
      "message": "The local id is the topological sort rank - previously there was a map keeping them, but it was both wasteful (if using HashMap) and inefficient. There are many lookups done below, in the inner loop, between the ranks of fingerA and fingerB, so I decided to push this rank into the nodes as mLocalId. It might be useful for other use cases, because having a numbering of the nodes in [1..N] allows for arrays instead of maps - and I did that with the dominator map.\n\nI can push the dominators into the model, sure. But I don\u0027t see how I can not use the topological ranks?",
      "parentUuid": "f0684b04_afe06530",
      "range": {
        "startLine": 73,
        "startChar": 34,
        "endLine": 73,
        "endChar": 44
      },
      "revId": "fc3d9fb556ac742c0960d1feef5aaceba37788c8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70029b43_1a6281e4",
        "filename": "perflib/src/main/java/com/android/tools/perflib/heap/analysis/Dominators.java",
        "patchSetId": 2
      },
      "lineNbr": 73,
      "author": {
        "id": 1047453
      },
      "writtenOn": "2014-09-09T18:12:00Z",
      "side": 1,
      "message": "Oops sorry I missed the rank comparison. all the other lookups are not an issue as mDominatorMap[x.getLocalId()] \u003c\u003d\u003e x.getDominator().\n\nI would rename localId to myTopologicalOrder. I tbh would still move the dominator into the model anyway because I think it would simplify other usages of dominators. Once the dominators are computed we shouldn\u0027t need this class and our model should be able to answer all these questions.",
      "parentUuid": "10f15fa2_94cc8c70",
      "range": {
        "startLine": 73,
        "startChar": 34,
        "endLine": 73,
        "endChar": 44
      },
      "revId": "fc3d9fb556ac742c0960d1feef5aaceba37788c8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70029b43_da6759ed",
        "filename": "perflib/src/main/java/com/android/tools/perflib/heap/analysis/Dominators.java",
        "patchSetId": 2
      },
      "lineNbr": 151,
      "author": {
        "id": 1047453
      },
      "writtenOn": "2014-09-09T18:12:00Z",
      "side": 1,
      "message": "Shoudln\u0027t this be in the Snapshot class?",
      "range": {
        "startLine": 151,
        "startChar": 26,
        "endLine": 151,
        "endChar": 47
      },
      "revId": "fc3d9fb556ac742c0960d1feef5aaceba37788c8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}